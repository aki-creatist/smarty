# jQuery

* 取り出した要素セットに対して処理を行う
    * `なにを、どうする`が基本
        * `なにを` === `セレクター`
            * `セレクター構文`を利用し`HTML要素セット`を取り出す
        * `どうする` === `jQueryメソッド`
            * `jQueryメソッド`を使用し処理を行う
* `$(function() {...});`で始まる
    * `$` は `jQuery` と同義
        * `$` を `jQuery` と書き換えても動作する
    * `$(function() {...});`内のコードはページが全てレンダリングされてから実行される
* 上から順に読み込まれたタイミングで実行される

## セレクター構文

以下で分類できる

* 基本セレクター
* 階層セレクター
* フィルター

### 概要

* HTMLの要素を取り出す記法
    * CSSのセレクター構文を少し拡張
    * `$()関数`を利用して呼び出す
        * 戻り値として`jQueryオブジェクト`が返される
            * `取得した要素(群)`とメソッドとプロパティの集まり

* `#id(id値で検索)`、`element(要素名で検索)`
    * 高速に動作する
    * 内部的には、ブラウザ標準で用意されている以下のメソッドで置き換えられる
        * `getElementById`/`getElementsByTagName`
* .class(class属性で検索)
    * 高速に動作する
    * 内部的には、ブラウザ標準で用意されている以下のメソッドで置き換えられる
    * `getElementsByClassName`/`querySelectorAll`
* jQuery独自の拡張セレクター
    * 低速に動作する
    * 他で代用できないか検討するべき
    


```javascript
$(function(){
	$('何に対して').どの処理をする
});
```

`$()`を使用せず`javascriptの基本`だけで行うと以下のようになる
    * 要素の集合をプログラムでその一つを取り出し、処理していく(for文)
        * jQueryでは不要
            * `jQueryオブジェクト`が自分が保存している要素全てに自動実行する

```javascript
var list = document.getElementById('list');
var jqs = list.getElementByTagName('*');
for(var i=0; i &lt; jqs.length; i++){
	if( jqs[i].className === 'jq'){
    	jqs[i].style.backgroundColor = '#ccf';
    }
}
```

```html
<div id ="list">
    <p class="jq">IDがlistであるタグの下のクラスがjqの要素</p>
</div>
```

### 目的の要素を選択する

* `cssメソッド`を利用する
    * 要素に対して指定されたCSSのスタイルを設定するメソッド
    * `$(セレクター).css(プロパティ名,値)`

```javascript
$(function(){
	$('h2').css('color', 'blue');
	$('#env a').css('background-color', '#fcf');
});
```

一箇所にのみ効果を与えたい場合はクラスを付与する

```javascript
$('.クラス名').css('スタイル', '種類');
```

```html
<h1 class="クラス名">クラスのついたタグ</h1>
```

### セレクターの分類

* 基本
    * id値や要素/クラスの名前などで取得
* 階層
    * 要素間の親子関係、兄弟関係で取得
* フィルター
    * 取得した要素を、登場順序や属性値、子要素の有無などで絞り込み

#### 基本

* 要素名で取り出す
    * 目的の要素名を指定
        * 全ての要素に対してアクセスしたい場合は、アスタリスクで$('*')
        
```javascript
$('要素名')
```

* 特定の要素を取り出す
    * idやclassを指定

id値で要素を取り出すには、`$('#id値')`のように、 `#` を頭につける

```javascript
$('#タグのID').css('color', 'red');
```

class値で要素を取り出すには、`$('.class値')`のように、`.` を頭につける

```javascript
$('.タグのクラス').css('color', 'red');
```

`,` で区切って列挙可能。

```javascript
$('.クラス1, クラス2, id1, id2').css('color', 'red');
```

#### 階層

階層セレクターを利用することで、要素の親子/兄弟関係で要素を特定できる

* ある要素の`配下`にある要素を取り出す
    * `$('親 子')` と、セレクタ間を`スペース`で区切る

```javascript
$('#タグのID タグの種類').css('background-color', '#fcf');
```

* ある要素の`直下`にある要素を取り出す
    * `$('親 > 子')` と、セレクタ間を `>` で親子を指定する

```javascript
$('#タグのID > タグの種類').css('background-color', '#90F');
```

* ある要素の`次の要素`を取り出す
    * `$('prev + next')`と、セレクタ間を `+` で区切って指定

```javascript
$('#タグのID + タグの種類').css('background-color', '#fcf');
```

* ある要素以降に登場する要素を取り出す
    * `$('prev ~ li')`と、セレクタ間を `~` で区切って指定
        * 配下全てが対象となる

    
### フィルター

* フィルターはセレクターの一部
* 取得した要素を要素の絞り込む
    * 登場順序や属性の値を絞り込み対象とする
    * より詳細な指定ができる
* セレクターの末尾に`:` 区切りで指定
    * `:フィルター`
    
* 大別すると２種類
    * 子要素の内容によって、親を抽出
    * 子要素を抽出

#### 子要素の内容によって、親を抽出

##### 登場順序で絞り込み

* `:first`
    * 要素の`最初`を絞り込み
* `:last`
    * 要素の`最後`を絞り込み

```javascript
// ul 直下の li の最初と最後にcssメソッドでプロパティに装飾
$('ul > li:first').css('background-color', 'Lime');
$('ul > li:last').css('background-color', 'Yellow');
```

##### 偶数番目、奇数番目の要素

* `:even`
    * 要素の`奇数`を絞り込み
* `:odd`
    * 要素の`偶数`を絞り込み
    
##### n番目の要素

* `:eq(指定の数値)`
    * 要素の`指定の数値`を絞り込み
    * `0` から数える

##### n番目より前/後ろの要素

* `:lt(指定の数値)`
    * `指定数値`より`前`を指定
        * `lt` は `Less Than` で `より小さい`
* `:gt(指定の数値)`
    * `指定数値`より`後`を指定
        * `gt` は `Greater Than` で `より大きい`
    
##### テキストによる絞り込み

* `:contains(指定の文字列)`
    * `指定の文字列` に合致するものを絞り込み
        * 大文字/小文字は区別される

##### 内容を持つ/持たない要素

* `:parent`
    * 内容を持つ要素
* `:empty`
    * 内容を持たない要素

##### 指定した要素に合致する子要素を含んだ要素

* `:has(指定した要素)`
    * `指定した要素`に合致する`子要素`を含んでいるものを絞り込み
    * 例：`has(cite)` は `<p><cite></cite></p>` の `<p>` を絞り込む

#### 子要素を抽出

* ここまで
    * 子要素の内容によって`親要素を取り出す`ためのフィルター
* ここから先
    * `子要素を取り出す`ためのフィルター
    
##### 先頭、または末尾の子要素を取り出す

* `:frist-child`
    * `最初`の`子要素`
* `:last-child`
    * `最後`の`子要素`
* `:first` `:last` と区別がつきにくい
    * `-child` を抜いて比較してみるとわかる
        * `-child` を抜かずに `<ul></ul>` が２つある場合
            * それぞれの `<ul></ul>` 内の最初と最後の `<li>` を指す
                * 親要素が複数あれば、その数だけ最初/最後の子要素もある
        * `-child` を抜いて `<ul></ul>` が２つある場合
            * １つ目の `<ul></ul>` の 最初の `<li>` を指す
            * ２つ目の `<ul></ul>` の 最後の `<li>` を指す

##### n個ごとに個要素を取り出す

* `:nth-child`
    * 式を指定することで `n個ごと` の個要素を取得
        * 例
            * `3n` は、`３個ごと`
            * `3n+1` は、`３で割ったときに１余る` 番目
            * `3n+2` は、`３で割ったときに２余る` 番目
            * `4n` は、 `４個ごと`
            * `even` や `odd` も指定可能
            * `4` (固定値で指定)は、`４番目`
    * `:eq`、`:gt`、`:lt` などのフィルターとの違い
        * `:nth-childフィルターは1,2,3...と数える
           * 0,1,2...ではない

##### 唯一の子要素であるものだけを取り出す

* `:only-child`
    * その要素が親要素にとって唯一の子要素である場合にのみ、その要素を取り出す
    * `本体テキストは子要素としてみなされない`

#### 属性値によって目的の要素を絞り込む

##### 特定の属性を持つ要素だけを取り出す

* `[attr]`
    * 特定の属性を持つ要素だけを取得する
    * 属性フィルターは、他のフィルターと異なる指定
        * `:フィルター名` ではなく `[フィルター]`の形式で指定
            * `a[target]` アンカータグのうち、`target`が指定されているもの
            
##### 属性がある値に等しい/等しくない要素だけを取り出す

* `[attr = 'value']`
    * 特定の属性の中でも、ある値valueを持つ要素だけを取り出す
    * 完全一致

##### 属性の値が部分的に一致する要素だけを取り出す

* 部分一致の例
    * `[属性名 ^=値]`
        * 属性値がある値で始まる要素を取り出す(前方一致)
    * `[属性名 $=値]`
        * 属性値が値で終わる要素にマッチ(後方一致)
    * `[属性名 *=値]`
        * 属性値がある値を含む要素にマッチ(部分一致)

##### 複数の属性フィルターを組み合わせる

* `[...][...]`
    * 属性フィルターを組み合わせる

#### その他のフィルター

##### 見出しだけ取り出す

* `:header`
    * `:header` 全てのタイトル(`<h1>〜<hx>`)
    
##### セレクターに合致しない要素を取り出す

* `not`
    * 指定されたセレクター(selector)に合致しない要素を抽出
    
##### 状態でアクセスすべき要素を絞り込む

<table>
<tr><th>フィルター</th><th>概要</th></tr>
<tr><td>:enabled</td><td>フォーム要素が利用可能な状態にある場合</td></tr>
<tr><td>:disabled</td><td>フォーム要素が利用不可の状態にある場合</td></tr>
<tr><td>:checked</td><td>ラジオボタンやチェックボックスがチェック状態にある場合</td></tr>
<tr><td>:selected</td><td>選択ボックスで選択状態にある場合</td></tr>
<tr><td>:hidden</td><td>要素が非表示状態の場合</td></tr>
<tr><td>:visible</td><td>要素が表示状態の場合</td></tr>
<tr><td>:animated</td><td>要素がアニメーション中である場合</td></tr>
</table>