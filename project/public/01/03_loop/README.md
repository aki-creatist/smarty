# 制御構文

## 概要

繰り返し処理を行う

* 指定した条件にTRUEの間、FALSEまで繰り返す
    * `while`
        * while
            * 処理の実行する`前`に条件を判定
        * endwhile
            * 処理の実行する`前`に条件を判定
        * do while
            * 処理を実行した`後`に条件を判定
            * このため、必ず一度は処理を実行することになる。
    * `for`
* 要素の数だけ繰り返す
    * `foreach`
        * `foreach($配列 as $変数)`
            * 値のみ操作する
                * 配列に格納されている値を配列の先頭から一つだけ変数に格納
                * 処理を実行
                * 処理が終わったら元に戻り
                * 次の値を変数に格納して処理を続ける
                * 値がなくなったらループを抜ける
        * `foreach($配列 as $キー => $変数)`
            * 連想配列からキーと値を同時に取り出し、操作する
                * 変数$キーに、連想配列のキーが格納される
                * $変数にキーと関連づけされた値が格納される

`for`、`while`の典型は、`要素の数`だけ繰り返す処理

* 配列の要素の数をcount関数で計算
* 要素の個数-1まで繰り返し処理
    * 配列の添え字を順に指定し、出力

```php
<?php
$arr = ["A", "B", "C" ,"D"];

//echo $arr[0];
//echo $arr[1];
//echo $arr[2];
//echo $arr[3];
$num = count($arr);
for ($i = 0; $i < $num; $i++) {
	echo $arr[$i]; // ABCDが順に出力される
}
```

### while

* [read_files_in_dir.php](read_files_in_dir.php)
    * カレントディレクトリ内のファイル名やディレクトリ名をすべて表示

### for

* [pulldown_prefectures.php](pulldown_prefectures.php)
    * 都道府県をプルダウンメニューで表示
        * 都道府県は `47` 個
            * 配列ではインデックスを0から数えるため `0から46` の47個
            * 条件式を書き直すとすると `$i <= 46`
        * 増減式「$i++」により `1ずつインデックスを移動`
        * 繰り返し実行される処理 `echo $PrefectureList[$i];` で配列のデータを表示します。
    * HTMLの作成
        * 操作しやすいように変数$htmlに文字列を貯める
            * $htmlには `select` タグを格納
            * `¥n` は改行コード
                * ソースを確認するときに適切に改行が入っていると見やすい
            * `\` (バックスラッシュ)でエスケープ
                * 文字列を囲む `"` と認識されないようにする
            * `.=` を使って、文字列を結合しながら格納していく
            * `$html .="</select>¥n";`として、`</select>`タグで閉じる
    * `echo $html;` で一度に表示する
            
                