# データの受け取り

## 共通

受け取った値は、グローバル変数 `$_POST`に格納される

* データが送信されると受信側の中に記述されたコードが実行される
* 受信したテキストデータをグローバル変数から取得
    * POSTメソッドで送信されたデータは$_POSTに格納される
    * GETメソッドで送信されたデータは$_GETに格納される
    * いずれのメソッドに限らず`$_REQUEST`で取得することも可能
* データを参照するには、入力欄の`input`タグのname属性を`$_POST`のキーにして指定

```html
$_POST['inputタグのname属性']
```

## 各フォームの受け取り方

* ラジオボタン
* プルダウン
* チェックボックス
* テキストエリア
* hiddenタグ
* 送信ボタン

### ラジオボタン

`input`タグの`name`属性に指定された値を`$_POST`の引数に指定

```php
$_POST["gender"]; // 今回の例では 男 か 女 が格納されている
```

* `name`属性がgenderであるフォームが送信されたか
    * TRUE
        * その値は`男"であるか
            * `男`と出力
        * その値は`女`であるか
            * `女`と出力
    * FALSE
        * 性別を選択してくださいを出力

```php
if (isset($_POST["gender"]) && $_POST["gender"] == "男" || $_POST["gender"] == "女")) {
```

### プルダウンメニュー

`selet`タグの`name`属性に指定された値を`$_POST`の引数に指定

```php
$_POST["ken"] // 今回の例では 選択された都道府県が１つ 格納されている
```

* `name`属性がkenであるフォームが送信されたか
    * TRUE
        * 選択された都道府県を出力
    * FALSE
        * 都道府県を選択してくださいを出力

```php
if ($_POST["ken"] != "") {
```

### チェックボックス

`input`タグの`name`属性に指定された値を`$_POST`の引数に指定

* 値は`配列で受け取る`という点に注意
    * `implode`関数を使用し、値と値の間に「と」を含んだ文字列に変換
    * 文字列を変数に格納

```php
$_POST["hobby"] // 今回の例では 選択された都道府県が１つ 格納されている
```

* `name`属性がhobboyであるフォームが送信されたか
    * TRUE
        * 配列を繋げ文字列に変換
            * 選択された値を出力
    * FALSE
        * 選択してくださいを出力
        
```php
if ($_POST["hobby"] != "") {
```

### テキストエリア

`textarea`タグの`name`属性に指定された値を`$_POST`の引数に指定

```php
$_POST["contents"]
```

### heddenタグ

`input`タグの`name`属性に指定された値を`$_POST`の引数に指定

#### データの持ち回り

関連ファイル

* hidden.html
    * confirm.phpにフォーム送信を行う
* confirm.php
    * hidden.htmlから値を受け取る
    * 見えないフォームに受け取った値をセット
    * hidden.phpに送信
* hidden.php
    * confirm.phpから値を受け取る

hidden.htmlから受け取った値をconfirm.phpで再度セットし送信する箇所

```php
value="<?=$_POST["user_id";]?>;
```

### 送信ボタン

`input`タグの`name`属性に指定された値を`$_POST`の引数に指定

* `確認`ボタンのname属性に`confrim`を設定
* `戻る`ボタンのname属性に`back`を設定

#### クリックされたボタンを判断する

* `isset`による判定
    * `$_POST["confirm"]`がセットされている
        * TRUE
            * 確認ボタンが押されている
            * button.phpに進み、メッセージを出力
        * FALSE
            * 確認ボタンが押されていない
            * 戻るボタンが押されたか判定
    * `$_POST["back"]`がセットされている
        * TRUE
            * 戻るボタンが押されている
            * button.phpに進み、button.htmlと同様の画面を表示
        * FALSE
            * 戻るボタンは押されていない
            * 両ボタンが押されていないと判断し、エラーメッセージ出力
            
戻るボタンの場合、実際に戻るわけではなく、
１つ前の画面と同様の出力を行い、ページが戻ったように見せている


```php
<?php if (条件式) { ?>

「確認」ボタンがクリックされた場合の画面または処理

<?php } elseif (次の条件式) { ?>

「戻る」ボタンがクリックされた場合の画面または処理

<?php } else { ?>

どちらにも合致しない場合の画面

<?php } ?>
```